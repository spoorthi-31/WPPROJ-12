<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Smart Resume Builder — Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 24px; background:#f8fafc; }
    .card { border-radius: 10px; }
    textarea.json-area { font-family: monospace; height: 160px; }
  </style>
</head>
<body>
<div class="container">
  <h1 class="mb-3">Smart Resume Builder (Node.js)</h1>
  <div class="row">
    <div class="col-md-6">
      <form id="resumeForm" method="post" action="/preview">
        <input type="hidden" name="resume" id="resumeInput" />
        <div class="card p-3 mb-3">
          <div class="mb-2"><label class="form-label">Full name</label><input id="name" class="form-control" /></div>
          <div class="mb-2"><label class="form-label">Title</label><input id="title" class="form-control" /></div>
          <div class="mb-2"><label class="form-label">Email</label><input id="email" class="form-control" /></div>
          <div class="mb-2"><label class="form-label">Phone</label><input id="phone" class="form-control" /></div>

          <div class="mb-2"><label class="form-label">Professional summary</label>
            <textarea id="summary" class="form-control" rows="4"></textarea>
          </div>

          <div class="mb-2"><label class="form-label">Skills (comma separated)</label>
            <input id="skills" class="form-control" placeholder="e.g. JavaScript, Node.js, SQL" />
          </div>

          <div class="mb-2">
            <label class="form-label">Experience (JSON array)</label>
            <textarea id="experience" class="form-control json-area">[{"role":"Software Engineer","company":"ACME","period":"2022 - Present","description":"Worked on X"}]</textarea>
            <div class="form-text">Format: [{"role","company","period","description"}, ...]. Use preview to validate.</div>
          </div>

          <div class="mb-2">
            <label class="form-label">Education (JSON array)</label>
            <textarea id="education" class="form-control json-area">[{"degree":"BSc Computer Science","institution":"University","year":"2021"}]</textarea>
          </div>

          <div class="d-flex gap-2">
            <button class="btn btn-primary" type="button" onclick="submitForm()">Preview</button>
            <button class="btn btn-outline-secondary" type="button" onclick="loadExample()">Load example</button>
          </div>
        </div>
      </form>
    </div>

    <div class="col-md-6">
      <div class="card p-3">
        <h5>Quick tips</h5>
        <ul>
          <li>Fill summary and skills — AI uses them to craft suggestions.</li>
          <li>Validate JSON for experience & education before preview.</li>
          <li>After preview, request AI suggestions and export PDF.</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
function submitForm(){
  const resume = {
    name: document.getElementById('name').value,
    title: document.getElementById('title').value,
    email: document.getElementById('email').value,
    phone: document.getElementById('phone').value,
    summary: document.getElementById('summary').value,
    skills: document.getElementById('skills').value.split(',').map(s=>s.trim()).filter(Boolean),
    experience: tryParse(document.getElementById('experience').value, []),
    education: tryParse(document.getElementById('education').value, [])
  }
  document.getElementById('resumeInput').value = JSON.stringify(resume)
  document.getElementById('resumeForm').submit()
}

function tryParse(str, fallback){
  try { return JSON.parse(str) } catch(e){ return fallback }
}

function loadExample(){
  document.getElementById('name').value = 'Priya Sharma'
  document.getElementById('title').value = 'Full Stack Developer'
  document.getElementById('email').value = 'priya@example.com'
  document.getElementById('phone').value = '+91 99999 11111'
  document.getElementById('summary').value = 'Full stack developer with 3 years experience building web apps in Node.js and React.'
  document.getElementById('skills').value = 'Node.js, Express, React, MongoDB, SQL, HTML, CSS'
  document.getElementById('experience').value = JSON.stringify([
    { role: 'Software Engineer', company: 'ACME Inc', period: '2022 - Present', description: 'Built REST APIs and microservices.' },
    { role: 'Frontend Developer', company: 'StartupX', period: '2020 - 2022', description: 'Developed UI components and improved app performance.' }
  ], null, 2)
  document.getElementById('education').value = JSON.stringify([{ degree: 'BTech Computer Science', institution: 'ABC University', year: '2020' }], null, 2)
}
</script>
</body>
</html>
